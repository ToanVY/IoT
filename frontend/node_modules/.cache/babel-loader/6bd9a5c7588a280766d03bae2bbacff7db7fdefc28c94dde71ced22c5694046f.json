{"ast":null,"code":"import React,{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Table(_ref){let{columns,data,rowsPerPageOptions=[5,10,20],enableDeviceFilter=false,enableDateFilter=false}=_ref;const[page,setPage]=useState(0);const[rowsPerPage,setRowsPerPage]=useState(rowsPerPageOptions[0]);// Bộ lọc\nconst[deviceFilter,setDeviceFilter]=useState(\"\");const[startDate,setStartDate]=useState(\"\");const[endDate,setEndDate]=useState(\"\");// Lọc dữ liệu theo điều kiện\nlet filteredData=data;if(enableDeviceFilter&&deviceFilter){filteredData=filteredData.filter(row=>row.device&&row.device.toLowerCase()===deviceFilter.toLowerCase());}if(enableDateFilter&&(startDate||endDate)){filteredData=filteredData.filter(row=>{const time=new Date(row.timestamp);const afterStart=startDate?time>=new Date(startDate):true;const beforeEnd=endDate?time<=new Date(endDate):true;return afterStart&&beforeEnd;});}// Pagination\nconst start=page*rowsPerPage;const end=start+rowsPerPage;const paginatedData=filteredData.slice(start,end);const totalPages=Math.ceil(filteredData.length/rowsPerPage);const handlePrev=()=>page>0&&setPage(page-1);const handleNext=()=>page<totalPages-1&&setPage(page+1);const handleRowsChange=e=>{setRowsPerPage(Number(e.target.value));setPage(0);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 mb-4 items-center text-sm\",children:[enableDeviceFilter&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"mr-2\",children:\"Device:\"}),/*#__PURE__*/_jsxs(\"select\",{value:deviceFilter,onChange:e=>{setDeviceFilter(e.target.value);setPage(0);},className:\"border rounded p-1\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All\"}),[...new Set(data.map(d=>d.device))].map((dev,i)=>/*#__PURE__*/_jsx(\"option\",{value:dev,children:dev},i))]})]}),enableDateFilter&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 items-center\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"From:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:startDate,onChange:e=>{setStartDate(e.target.value);setPage(0);},className:\"border rounded p-1\"}),/*#__PURE__*/_jsx(\"label\",{children:\"To:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:endDate,onChange:e=>{setEndDate(e.target.value);setPage(0);},className:\"border rounded p-1\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-auto rounded-xl data-table\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:columns.map((col,idx)=>/*#__PURE__*/_jsx(\"th\",{className:\"p-3 text-left\",children:col.header},idx))})}),/*#__PURE__*/_jsx(\"tbody\",{children:paginatedData.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:columns.length,className:\"p-4 text-center text-gray-400\",children:\"No data available\"})}):paginatedData.map((row,rowIndex)=>/*#__PURE__*/_jsx(\"tr\",{className:\"odd:bg-white even:bg-gray-50/50 hover:bg-gray-100\",children:columns.map((col,colIndex)=>/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:typeof col.accessor===\"function\"?col.accessor(row):row[col.accessor]},colIndex))},rowIndex))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Rows per page:\",\" \",/*#__PURE__*/_jsx(\"select\",{value:rowsPerPage,onChange:handleRowsChange,className:\"border rounded p-1\",children:rowsPerPageOptions.map(opt=>/*#__PURE__*/_jsx(\"option\",{value:opt,children:opt},opt))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePrev,disabled:page===0,className:\"px-3 py-1 rounded bg-gray-200 disabled:opacity-50\",children:\"Prev\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",page+1,\" of \",totalPages||1]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNext,disabled:page>=totalPages-1,className:\"px-3 py-1 rounded bg-gray-200 disabled:opacity-50\",children:\"Next\"})]})]})]});}","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Table","_ref","columns","data","rowsPerPageOptions","enableDeviceFilter","enableDateFilter","page","setPage","rowsPerPage","setRowsPerPage","deviceFilter","setDeviceFilter","startDate","setStartDate","endDate","setEndDate","filteredData","filter","row","device","toLowerCase","time","Date","timestamp","afterStart","beforeEnd","start","end","paginatedData","slice","totalPages","Math","ceil","length","handlePrev","handleNext","handleRowsChange","e","Number","target","value","children","className","onChange","Set","map","d","dev","i","type","col","idx","header","colSpan","rowIndex","colIndex","accessor","opt","onClick","disabled"],"sources":["D:/xampp/htdocs/IoT/IoT-WebApp/frontend/src/components/Table.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\n\r\nexport default function Table({\r\n                                  columns,\r\n                                  data,\r\n                                  rowsPerPageOptions = [5, 10, 20],\r\n                                  enableDeviceFilter = false,\r\n                                  enableDateFilter = false,\r\n                              }) {\r\n    const [page, setPage] = useState(0);\r\n    const [rowsPerPage, setRowsPerPage] = useState(rowsPerPageOptions[0]);\r\n\r\n    // Bộ lọc\r\n    const [deviceFilter, setDeviceFilter] = useState(\"\");\r\n    const [startDate, setStartDate] = useState(\"\");\r\n    const [endDate, setEndDate] = useState(\"\");\r\n\r\n    // Lọc dữ liệu theo điều kiện\r\n    let filteredData = data;\r\n\r\n    if (enableDeviceFilter && deviceFilter) {\r\n        filteredData = filteredData.filter(\r\n            (row) =>\r\n                row.device &&\r\n                row.device.toLowerCase() === deviceFilter.toLowerCase()\r\n        );\r\n    }\r\n\r\n    if (enableDateFilter && (startDate || endDate)) {\r\n        filteredData = filteredData.filter((row) => {\r\n            const time = new Date(row.timestamp);\r\n            const afterStart = startDate ? time >= new Date(startDate) : true;\r\n            const beforeEnd = endDate ? time <= new Date(endDate) : true;\r\n            return afterStart && beforeEnd;\r\n        });\r\n    }\r\n\r\n    // Pagination\r\n    const start = page * rowsPerPage;\r\n    const end = start + rowsPerPage;\r\n    const paginatedData = filteredData.slice(start, end);\r\n    const totalPages = Math.ceil(filteredData.length / rowsPerPage);\r\n\r\n    const handlePrev = () => page > 0 && setPage(page - 1);\r\n    const handleNext = () => page < totalPages - 1 && setPage(page + 1);\r\n    const handleRowsChange = (e) => {\r\n        setRowsPerPage(Number(e.target.value));\r\n        setPage(0);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {/* Bộ lọc */}\r\n            <div className=\"flex flex-wrap gap-4 mb-4 items-center text-sm\">\r\n                {enableDeviceFilter && (\r\n                    <div>\r\n                        <label className=\"mr-2\">Device:</label>\r\n                        <select\r\n                            value={deviceFilter}\r\n                            onChange={(e) => {\r\n                                setDeviceFilter(e.target.value);\r\n                                setPage(0);\r\n                            }}\r\n                            className=\"border rounded p-1\"\r\n                        >\r\n                            <option value=\"\">All</option>\r\n                            {[...new Set(data.map((d) => d.device))].map((dev, i) => (\r\n                                <option key={i} value={dev}>\r\n                                    {dev}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                )}\r\n\r\n                {enableDateFilter && (\r\n                    <div className=\"flex gap-2 items-center\">\r\n                        <label>From:</label>\r\n                        <input\r\n                            type=\"date\"\r\n                            value={startDate}\r\n                            onChange={(e) => {\r\n                                setStartDate(e.target.value);\r\n                                setPage(0);\r\n                            }}\r\n                            className=\"border rounded p-1\"\r\n                        />\r\n                        <label>To:</label>\r\n                        <input\r\n                            type=\"date\"\r\n                            value={endDate}\r\n                            onChange={(e) => {\r\n                                setEndDate(e.target.value);\r\n                                setPage(0);\r\n                            }}\r\n                            className=\"border rounded p-1\"\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Bảng */}\r\n            <div className=\"overflow-auto rounded-xl data-table\">\r\n                <table className=\"min-w-full\">\r\n                    <thead>\r\n                    <tr>\r\n                        {columns.map((col, idx) => (\r\n                            <th key={idx} className=\"p-3 text-left\">\r\n                                {col.header}\r\n                            </th>\r\n                        ))}\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {paginatedData.length === 0 ? (\r\n                        <tr>\r\n                            <td colSpan={columns.length} className=\"p-4 text-center text-gray-400\">\r\n                                No data available\r\n                            </td>\r\n                        </tr>\r\n                    ) : (\r\n                        paginatedData.map((row, rowIndex) => (\r\n                            <tr\r\n                                key={rowIndex}\r\n                                className=\"odd:bg-white even:bg-gray-50/50 hover:bg-gray-100\"\r\n                            >\r\n                                {columns.map((col, colIndex) => (\r\n                                    <td key={colIndex} className=\"p-3\">\r\n                                        {typeof col.accessor === \"function\"\r\n                                            ? col.accessor(row)\r\n                                            : row[col.accessor]}\r\n                                    </td>\r\n                                ))}\r\n                            </tr>\r\n                        ))\r\n                    )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            {/* Pagination controls */}\r\n            <div className=\"flex items-center justify-between mt-4 text-sm\">\r\n                <div>\r\n                    Rows per page:{\" \"}\r\n                    <select\r\n                        value={rowsPerPage}\r\n                        onChange={handleRowsChange}\r\n                        className=\"border rounded p-1\"\r\n                    >\r\n                        {rowsPerPageOptions.map((opt) => (\r\n                            <option key={opt} value={opt}>\r\n                                {opt}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                        onClick={handlePrev}\r\n                        disabled={page === 0}\r\n                        className=\"px-3 py-1 rounded bg-gray-200 disabled:opacity-50\"\r\n                    >\r\n                        Prev\r\n                    </button>\r\n                    <span>\r\n            Page {page + 1} of {totalPages || 1}\r\n          </span>\r\n                    <button\r\n                        onClick={handleNext}\r\n                        disabled={page >= totalPages - 1}\r\n                        className=\"px-3 py-1 rounded bg-gray-200 disabled:opacity-50\"\r\n                    >\r\n                        Next\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}