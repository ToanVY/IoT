{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\IoT\\\\IoT-WebApp\\\\frontend\\\\src\\\\components\\\\SensorChart.jsx\",\n  _s = $RefreshSig$();\n// src/components/SensorChart.jsx\n\nimport React, { useMemo } from 'react';\nimport { Line } from 'react-chartjs-2';\n// Cần thiết để Chart.js hoạt động\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from 'chart.js';\n\n// Đăng ký các thành phần cần thiết\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\nconst SensorChart = ({\n  sensorData = []\n}) => {\n  _s();\n  // SỬ DỤNG useMemo để cấu trúc dữ liệu chỉ khi sensorData thay đổi\n  const chartData = useMemo(() => {\n    // Đảm bảo sensorData là một mảng và không rỗng\n    const dataArray = Array.isArray(sensorData) ? sensorData : [];\n\n    // 1. Chuẩn bị Labels (Thời gian)\n    const labels = dataArray.map(item => {\n      const date = new Date(item.created_at); // Giả định trường thời gian là 'created_at'\n      return date.toLocaleTimeString('vi-VN', {\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit'\n      });\n    });\n\n    // 2. Chuẩn bị Datasets (Nhiệt độ, Độ ẩm, Ánh sáng)\n    return {\n      labels: labels,\n      datasets: [{\n        label: 'Nhiệt độ (°C)',\n        data: dataArray.map(item => item.temperature),\n        // Lấy mảng giá trị Nhiệt độ\n        borderColor: 'rgb(255, 99, 132)',\n        // Màu đỏ\n        backgroundColor: 'rgba(255, 99, 132, 0.5)',\n        yAxisID: 'yTemp' // Gán trục Y (Nhiệt độ)\n      }, {\n        label: 'Độ ẩm (%)',\n        data: dataArray.map(item => item.humidity),\n        // Lấy mảng giá trị Độ ẩm\n        borderColor: 'rgb(53, 162, 235)',\n        // Màu xanh dương\n        backgroundColor: 'rgba(53, 162, 235, 0.5)',\n        yAxisID: 'yHumidity' // Gán trục Y (Độ ẩm)\n      }, {\n        label: 'Ánh sáng (Lux)',\n        data: dataArray.map(item => item.light),\n        // Lấy mảng giá trị Ánh sáng\n        borderColor: 'rgb(255, 206, 86)',\n        // Màu vàng\n        backgroundColor: 'rgba(255, 206, 86, 0.5)',\n        yAxisID: 'yLight' // Gán trục Y (Ánh sáng)\n        // Thiết lập custom axis nếu cần (Ánh sáng có thể có phạm vi rất lớn)\n      }]\n    };\n  }, [sensorData]); // Tái tính toán khi sensorData thay đổi\n\n  // Cấu hình Biểu đồ (Options)\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    // Quan trọng để biểu đồ chiếm hết không gian\n    interaction: {\n      mode: 'index',\n      intersect: false\n    },\n    stacked: false,\n    plugins: {\n      title: {\n        display: true,\n        text: 'Biểu đồ Cảm biến Thời gian thực (3 thông số)'\n      }\n    },\n    scales: {\n      x: {\n        title: {\n          display: true,\n          text: 'Thời gian'\n        }\n      },\n      // Trục Y cho Nhiệt độ (bên trái)\n      yTemp: {\n        type: 'linear',\n        display: true,\n        position: 'left',\n        title: {\n          display: true,\n          text: 'Nhiệt độ (°C)'\n        }\n      },\n      // Trục Y cho Độ ẩm (bên phải)\n      yHumidity: {\n        type: 'linear',\n        display: true,\n        position: 'right',\n        grid: {\n          drawOnChartArea: false // Không vẽ grid line để đỡ rối\n        },\n        title: {\n          display: true,\n          text: 'Độ ẩm (%)'\n        }\n      },\n      // Trục Y cho Ánh sáng (có thể ẩn hoặc đặt bên phải với phạm vi lớn)\n      yLight: {\n        type: 'linear',\n        display: false,\n        // Ẩn trục Light để đỡ rối, chỉ dùng tooltip\n        position: 'right',\n        grid: {\n          drawOnChartArea: false\n        }\n        // max: 1024, // Bạn có thể đặt max/min nếu biết phạm vi cảm biến\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: '400px'\n    },\n    children: [\" \", /*#__PURE__*/_jsxDEV(Line, {\n      options: options,\n      data: chartData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 9\n  }, this);\n};\n_s(SensorChart, \"i4eYYg6GOj65klTCDK4mhi4wfgw=\");\n_c = SensorChart;\nexport default SensorChart;\nvar _c;\n$RefreshReg$(_c, \"SensorChart\");","map":{"version":3,"names":["React","useMemo","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","jsxDEV","_jsxDEV","register","SensorChart","sensorData","_s","chartData","dataArray","Array","isArray","labels","map","item","date","Date","created_at","toLocaleTimeString","hour","minute","second","datasets","label","data","temperature","borderColor","backgroundColor","yAxisID","humidity","light","options","responsive","maintainAspectRatio","interaction","mode","intersect","stacked","plugins","title","display","text","scales","x","yTemp","type","position","yHumidity","grid","drawOnChartArea","yLight","style","height","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/xampp/htdocs/IoT/IoT-WebApp/frontend/src/components/SensorChart.jsx"],"sourcesContent":["// src/components/SensorChart.jsx\r\n\r\nimport React, { useMemo } from 'react';\r\nimport { Line } from 'react-chartjs-2';\r\n// Cần thiết để Chart.js hoạt động\r\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from 'chart.js';\r\n\r\n// Đăng ký các thành phần cần thiết\r\nChartJS.register(\r\n    CategoryScale,\r\n    LinearScale,\r\n    PointElement,\r\n    LineElement,\r\n    Title,\r\n    Tooltip,\r\n    Legend\r\n);\r\n\r\nconst SensorChart = ({ sensorData = [] }) => {\r\n    \r\n    // SỬ DỤNG useMemo để cấu trúc dữ liệu chỉ khi sensorData thay đổi\r\n    const chartData = useMemo(() => {\r\n        // Đảm bảo sensorData là một mảng và không rỗng\r\n        const dataArray = Array.isArray(sensorData) ? sensorData : [];\r\n\r\n        // 1. Chuẩn bị Labels (Thời gian)\r\n        const labels = dataArray.map(item => {\r\n            const date = new Date(item.created_at); // Giả định trường thời gian là 'created_at'\r\n            return date.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit', second: '2-digit' });\r\n        });\r\n\r\n        // 2. Chuẩn bị Datasets (Nhiệt độ, Độ ẩm, Ánh sáng)\r\n        return {\r\n            labels: labels,\r\n            datasets: [\r\n                {\r\n                    label: 'Nhiệt độ (°C)',\r\n                    data: dataArray.map(item => item.temperature), // Lấy mảng giá trị Nhiệt độ\r\n                    borderColor: 'rgb(255, 99, 132)', // Màu đỏ\r\n                    backgroundColor: 'rgba(255, 99, 132, 0.5)',\r\n                    yAxisID: 'yTemp', // Gán trục Y (Nhiệt độ)\r\n                },\r\n                {\r\n                    label: 'Độ ẩm (%)',\r\n                    data: dataArray.map(item => item.humidity), // Lấy mảng giá trị Độ ẩm\r\n                    borderColor: 'rgb(53, 162, 235)', // Màu xanh dương\r\n                    backgroundColor: 'rgba(53, 162, 235, 0.5)',\r\n                    yAxisID: 'yHumidity', // Gán trục Y (Độ ẩm)\r\n                },\r\n                {\r\n                    label: 'Ánh sáng (Lux)',\r\n                    data: dataArray.map(item => item.light), // Lấy mảng giá trị Ánh sáng\r\n                    borderColor: 'rgb(255, 206, 86)', // Màu vàng\r\n                    backgroundColor: 'rgba(255, 206, 86, 0.5)',\r\n                    yAxisID: 'yLight', // Gán trục Y (Ánh sáng)\r\n                    // Thiết lập custom axis nếu cần (Ánh sáng có thể có phạm vi rất lớn)\r\n                },\r\n            ],\r\n        };\r\n    }, [sensorData]); // Tái tính toán khi sensorData thay đổi\r\n\r\n    // Cấu hình Biểu đồ (Options)\r\n    const options = {\r\n        responsive: true,\r\n        maintainAspectRatio: false, // Quan trọng để biểu đồ chiếm hết không gian\r\n        interaction: {\r\n            mode: 'index',\r\n            intersect: false,\r\n        },\r\n        stacked: false,\r\n        plugins: {\r\n            title: {\r\n                display: true,\r\n                text: 'Biểu đồ Cảm biến Thời gian thực (3 thông số)',\r\n            },\r\n        },\r\n        scales: {\r\n            x: {\r\n                title: {\r\n                    display: true,\r\n                    text: 'Thời gian',\r\n                },\r\n            },\r\n            // Trục Y cho Nhiệt độ (bên trái)\r\n            yTemp: { \r\n                type: 'linear',\r\n                display: true,\r\n                position: 'left',\r\n                title: {\r\n                    display: true,\r\n                    text: 'Nhiệt độ (°C)',\r\n                },\r\n            },\r\n            // Trục Y cho Độ ẩm (bên phải)\r\n            yHumidity: { \r\n                type: 'linear',\r\n                display: true,\r\n                position: 'right', \r\n                grid: {\r\n                    drawOnChartArea: false, // Không vẽ grid line để đỡ rối\r\n                },\r\n                title: {\r\n                    display: true,\r\n                    text: 'Độ ẩm (%)',\r\n                },\r\n            },\r\n            // Trục Y cho Ánh sáng (có thể ẩn hoặc đặt bên phải với phạm vi lớn)\r\n            yLight: {\r\n                type: 'linear',\r\n                display: false, // Ẩn trục Light để đỡ rối, chỉ dùng tooltip\r\n                position: 'right', \r\n                grid: {\r\n                    drawOnChartArea: false,\r\n                },\r\n                // max: 1024, // Bạn có thể đặt max/min nếu biết phạm vi cảm biến\r\n            }\r\n        },\r\n    };\r\n\r\n    return (\r\n        <div style={{ height: '400px' }}> {/* Đảm bảo div cha có chiều cao cố định */}\r\n            <Line options={options} data={chartData} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SensorChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}